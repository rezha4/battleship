(()=>{"use strict";class e{constructor(e){this.size=e,this.hp=e}hit(){this.hp-=1}isSunk(){return this.hp<=0}}class t{constructor(e){this.board=this.createGameBoard(),this.ships=[],this.sunkenShips=0,this.player=e,this.allShipsSank=!1}createGameBoard(){let e=[];for(let t=0;t<10;t++){let t=[];e.push(t);for(let e=0;e<10;e++)t.push(0)}return e}placeShip(e,t,a){for(let i=0;i<a.size;i++){if(a.size>1&&9==t)return;this.board[e][t+i]=a}this.ships.push(a)}receiveAttack(t,a){if(1!=this.board[t][a]){if(0==this.board[t][a])this.board[t][a]+=1;else if(this.board[t][a]instanceof e){const e=this.board[t][a];e.hit(),e.isSunk()&&(this.sunkenShips+=1),this.board[t][a]=2}this.sunkenShips>=this.ships.length&&(this.allShipsSank=!0)}}}function a(e,t){e.board.forEach(((e,a)=>{e.forEach(((e,i)=>{const s=document.createElement("div");s.dataset.x=a,s.dataset.y=i,0==e?t.appendChild(s):1==e?(s.classList.add("miss"),t.appendChild(s)):2==e?(s.classList.add("hit"),t.appendChild(s)):e!=Number&&t.appendChild(s)}))}))}function i(e){for(;e.firstChild;)e.removeChild(e.firstChild)}const s=new t("Player-one"),r=new t("Player-two"),h=document.querySelector("#player-one #game-board"),n=document.querySelector("#player-two #game-board"),o=new e(5),l=new e(4),p=new e(3),c=new e(3),d=new e(2);s.placeShip(0,0,o),s.placeShip(2,0,l),s.placeShip(4,0,p),s.placeShip(6,0,c),s.placeShip(8,0,d),a(s,h);const u=new e(5),S=new e(4),f=new e(3),m=new e(3),b=new e(2);r.placeShip(0,0,u),r.placeShip(2,0,S),r.placeShip(4,0,f),r.placeShip(6,0,m),r.placeShip(8,0,b),a(r,n);let w="player";function k(){const e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random());1!=s.board[e][t]&&2!=s.board[e][t]||k(),s.receiveAttack(e,t),i(h),a(s,h),s.allShipsSank?alert("Com wins"):w="player"}n.addEventListener("click",(function(e){const t=e.target,s=parseInt(t.dataset.x),h=parseInt(t.dataset.y);1!=r.board[s][h]&&2!=r.board[s][h]?(r.receiveAttack(s,h),i(n),a(r,n),r.allShipsSank?alert("Player wins"):(w="computer",setTimeout(k(),1e3))):console.log("invalid move")}))})();